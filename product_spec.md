# 📘 プロダクト完全仕様書：『FlashNote AI』 (Production v1.0)

## 1. プロダクトビジョン & コンセプト
**Vision:** 「動画学習における『ノート作成』という非生産的な時間を消滅させる」
**Concept:** YouTube to Notion "Perfect" Study Guide
単なる要約ツールではありません。
「動画の内容を理解し、整理し、図解し、テスト問題まで作る」——まるで専属の東大生家庭教師が隣にいて、あなたの代わりに完璧なノートを作ってくれる体験を提供します。

## 2. ターゲット & ユースケース（Mass Market）
**Primary:** Z世代〜ミレニアル世代の学習者（高校・大学・資格・リスキリング）。
**Use Cases:**
- **テスト前夜:** 10本の講義動画を一括でノート化し、通学中にスマホで復習。
- **語学学習:** 英語の動画から単語帳とフレーズ集を自動生成。
- **セミナー動画:** 1時間のビジネスセミナーから、アクションプランと図解を抽出。

## 3. 「完成品」としての機能要件 (Feature Set)
MVPでは削っていた「あったらいいな」を全て実装し、UXを極めます。

### 💎 Core Features (生成機能)
- **Smart Chaptering (知的構造化)**
  動画の字幕をただ要約するのではなく、論理構成（序論・本論・結論）に基づき、NotionのH1/H2/H3見出し、箇条書き、番号付きリストを駆使して再構築します。
- **Auto-Visualization (Mermaid.js図解) ⭐️ High-End Feature**
  複雑な概念や手順を、AIがフローチャートやマインドマップ（Mermaid記法）に変換し、Notion上の図として表示します。
  例：「歴史の因果関係」や「プログラミングの処理フロー」を図解化。
- **Active Recall Quizzes (暗記カード)**
  Notionのトグル機能を活用した「一問一答」。
  レベル調整機能: 「基礎」「応用」「ひっかけ問題」をユーザーが選択可能。
- **Vocabulary & Formula Table (用語・公式リスト)**
  動画内の重要単語、年号、数学の公式などを検知し、自動で「データベース（Table）」形式で出力。
- **Multi-Language Support (多言語対応)**
  英語の動画を「日本語で」ノート化、またはその逆が可能。

### 🎨 UX/UI Features (使い勝手)
- **Interactive Sidebar (Chrome Side Panel)**
  YouTube画面を隠さず、右側のサイドパネルで処理状況をリアルタイム表示。
- **Chat with Video:** 生成されたノートに対して、サイドバーから「この部分もっと詳しく教えて」とAIにチャットで質問できる機能。
- **Custom Preset (設定保存)**
  「世界史用（年号重視）」「プログラミング用（コード重視）」「英語学習用（単語重視）」など、プロンプト設定をプリセットとして保存・切り替え可能。
- **Screenshot Embedding (スナップショット)**
  動画内の「スライドが変わった瞬間」や「板書が完成した瞬間」のタイムスタンプを特定し、クリックで見れるリンク、あるいは画像を埋め込みます。

## 4. アウトプット品質（Notionページ構成）
ユーザーが得られる成果物は、書店で売っている参考書レベルのクオリティを目指します。

| セクション | 内容・形式 | デザイン要素 |
| :--- | :--- | :--- |
| **Header** | タイトル、サムネ、講師名、URL | Cover Image自動設定 |
| **Overview** | 3行でわかる要点まとめ | Callout (💡) |
| **Mind Map** | 内容の全体像を図解 | Mermaid Chart |
| **Contents** | 講義本編（章ごとに構造化） | H2, H3, Bold, Highlight |
| **Key Points** | 「ここだけ覚えろ」リスト | Red Color Text |
| **Vocabulary** | 重要語句リスト | Notion Database View |
| **Test** | 理解度確認クイズ (10問) | Toggle List |

## 5. ビジネスモデル & 収益化計画
最初から課金ポイントを作ります。「無料でも使えるが、ヘビーユーザーは課金必須」のバランスにします。

**Free Plan:**
- 月5本まで保存可能。
- 動画の長さ制限（20分以内）。
- GPT-4o-mini 使用（高速だが精度は並）。

**Pro Plan (¥980 / month):**
- 無制限保存。
- 長尺動画対応（2時間までOK）。
- GPT-4o 使用（最高精度・図解生成あり）。
- 「Chat with Video」機能解放。
- 過去のノート検索・管理機能。

## 6. 開発ロードマップ（初期リリースまで）
「完成品」としてリリースするため、開発期間を少し長めに取ります（目安：1〜1.5ヶ月）。

- **Week 1: Core Logic (Backend)**
  FastAPI構築、字幕取得、GPT-4oによるマークダウン生成、Mermaid図解生成の精度向上。
- **Week 2: Notion Integration & Auth**
  Supabase認証の実装、Notion APIの複雑なブロック（Table, Toggle, Callout）への完全対応。
- **Week 3: Frontend (Chrome Extension)**
  Reactサイドパネルの実装、Stripe決済画面の統合、UIデザインの磨き込み。
- **Week 4: QA & Polish**
  エラーハンドリング（字幕がない動画、長すぎる動画の処理）、ユーザビリティテスト、LP（ランディングページ）作成。
